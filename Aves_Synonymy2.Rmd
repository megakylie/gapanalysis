---
title: "Aves Synonymy"
output: html_notebook
---

---
title: "Aves Synonymy & Hemiptera Synonymy"
output: html_notebook
editor_options: 
  chunk_output_type: console
---

This is an R Markdown for the TNC Gap Analysis to complete the synonymy for Aves and Hemiptera. Aves: DAK has done the Cal-IBIS and SBMNH synonymy. Using lists created from her completed synonymy this code will complete the synonymy for the iNaturalist and eBird datasets. Then a second round was done with the synonymy list she provided. 

9/3/21 Another round of synonymy updates for the SBMNH datasets which are new (not all the SBMNH was previously included)

I deleted the birds from the other synonymy thinking they were in Aves_Analysis.Rmd, but they weren't..so this is the Aves_Synonymy.Rmd code revived. 

#Download Packages & Data
```{r Packages!}
library(tidyverse)
library(lubridate)
library(stringr)
```

#Aves
```{r Data}
aves_syn = read_csv("Aves/aves_syn.csv")
aves_inat_messy = read_csv("Aves/aves_inat_messy.csv")
aves_ebird_messy = read_csv("Aves/aves_ebird_messy.csv")

```

## Aves R1 Synonymy
```{r}
aves_inat1 <- left_join(aves_inat_messy, aves_syn)
write.csv(aves_inat1, "Aves/aves_inat1.csv")
#about 1000 lines missing, 162 unique ScientificNames

aves_ebird1 <- left_join(aves_ebird_messy, aves_syn)
write.csv(aves_ebird1, "Aves/aves_ebird1.csv")
#about 2000 lines missing, 34 unique ScientificNames (179 inat and ebird combined)


```

## Aves R2 Synonymy with second list.
Denise did the synonymy for the missing lines, and I have an updated list to compare the inat and ebird data too, will repeat the same process as above with the new list and the "aves_inat1" & "aves_ebird1" files 

```{r}
aves_syn = read_csv("Aves/aves_syn.csv")
aves_syn2 = read_csv("Aves/aves_syn2.csv")
aves_syn_complete = rbind(aves_syn, aves_syn2)
write.csv(aves_syn_complete, "Aves/aves_syn_complete.csv", na="")

aves_syn_complete = read_csv("Aves/aves_syn_compete.csv")

aves_inat2 <- left_join(aves_inat_messy, aves_syn_complete)
aves_ebird2 <- left_join(aves_ebird_messy, aves_syn_complete)

write.csv(aves_inat2, "Aves/aves_inat2.csv", na="")
write.csv(aves_ebird2, "Aves/aves_ebird2.csv", na="")

#have to do some manual corrects on inat2 due to funky characters, and removed MX islands, now inat3
```

## Aves R3 Synonymy 9/3/21 Uploading and doing the synonymy for the new SBMNH datasets 
```{r}
#add synonymy lists
aves_syn = read_csv("Aves/aves_syn.csv")
aves_syn2 = read_csv("Aves/aves_syn2.csv")
aves_syn_complete = rbind(aves_syn, aves_syn2)
write.csv(aves_syn_complete, "Aves/aves_syn_compete.csv", na="")

aves_sbmnh_obs_messy= read_csv("Aves/aves_sbmnh_obs.csv")
aves_sbmnh_col_messy = read_csv("Aves/aves_sbmnh_col.csv")

aves_sbmnh_obs2 <- left_join(aves_sbmnh_obs_messy, aves_syn_complete)
aves_sbmnh_col2 <- left_join(aves_sbmnh_col_messy, aves_syn_complete)
#aves obs has all syn done. 

write.csv(aves_sbmnh_obs2, "Aves/aves_sbmnh_obs2.csv", na="")
write.csv(aves_sbmnh_col2, "Aves/aves_sbmnh_col2.csv", na="")

#Issues when rare taxa list came up, some were synonymized up to species and there are subspecies on the list, fixed the inat and ebird synonymy here but because there were some unkwn changes done to the the sbmnh obs and col list I will do it separately in excel
```
## Aves R4 new EBIRD dataset
```{r}


aves_syn = read_csv("Aves/aves_master_syn_complete.csv")
aves_ebird_messy = read_csv("Aves/ave_ebird.new.csv")
aves_ebird_new2 <- left_join(aves_ebird_messy, aves_syn)
write.csv(aves_ebird_new2, "Aves/aves_ebird_new2.csv", na="")

```

```


